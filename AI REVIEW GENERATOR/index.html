<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nayan Optics Review</title>
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React and ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- Babel to handle JSX in the browser -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        @keyframes fade-in {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes slide-up {
          from { transform: translateY(20px); opacity: 0; }
          to { transform: translateY(0); opacity: 1; }
        }
        .animate-fade-in { animation: fade-in 0.5s ease-out; }
        .animate-slide-up { animation: slide-up 0.5s ease-out; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
    </style>
</head>
<body class="bg-slate-50">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- CONFIGURATION ---
        const SHOP_NAME = "Nayan Optics";
        const GOOGLE_REVIEW_LINK = "https://g.page/r/CXM3UiyGFi5sEBE/review"; 

        // --- ICONS ---
        const Glasses = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="6" cy="15" r="4"/><circle cx="18" cy="15" r="4"/><path d="M14 15a2 2 0 0 0-2-2 2 2 0 0 0-2 2"/><path d="M2.5 13L5 7c.7-1.3 1.4-2 3-2"/><path d="M21.5 13L19 7c-.7-1.3-1.5-2-3-2"/></svg>
        );
        const Eye = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/></svg>
        );
        const Sun = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/></svg>
        );
        const Sparkles = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/></svg>
        );
        const Star = ({ size = 24, fill = "none", className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill={fill} stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>
        );
        const Check = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polyline points="20 6 9 17 4 12"/></svg>
        );
        const Copy = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg>
        );
        const MapPin = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></svg>
        );
        const ChevronRight = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m9 18 6-6-6-6"/></svg>
        );
        const Zap = ({ size = 24, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>
        );

        // --- MAIN APP ---
        function App() {
            const [step, setStep] = useState(1);
            const [service, setService] = useState("");
            const [generatedOptions, setGeneratedOptions] = useState([]);
            const [copiedIndex, setCopiedIndex] = useState(null);

            // Helper to pick random item from array
            const pick = (arr) => arr[Math.floor(Math.random() * arr.length)];

            // Capitalize first letter
            const capitalize = (s) => s && s[0].toUpperCase() + s.slice(1);

            // --- DYNAMIC REVIEW GENERATOR ---
            const generateReviews = (serviceType) => {
                const reviews = new Set(); // Use Set to avoid exact duplicates in one batch
                const targetCount = 5;
                
                // Extended Word Banks
                const adjectives = ["great", "excellent", "fantastic", "amazing", "superb", "wonderful", "top-notch", "exceptional", "brilliant", "outstanding"];
                const staffAdj = ["helpful", "friendly", "knowledgeable", "professional", "kind", "polite", "courteous", "efficient", "welcoming"];
                const speedAdj = ["fast", "quick", "speedy", "prompt", "swift"];
                const thanks = ["Highly recommend!", "Thanks Nayan Optics!", "Will visit again.", "Five stars!", "Truly appreciate it.", "Will be back!", "Thank you!"];
                
                // 1. SPECIAL LOGIC FOR FAST SERVICE
                if (serviceType === "fast service") {
                    const fastTemplates = [
                        () => `Can't believe how fast the service was at ${SHOP_NAME}! Got my glasses in 10 minutes. ${pick(thanks)}`,
                        () => `Super fast delivery! Walked in and had my glasses ready in just 10 mins. ${capitalize(pick(adjectives))} experience.`,
                        () => `Needed glasses urgently and ${SHOP_NAME} delivered in 10 minutes. ${capitalize(pick(adjectives))} service!`,
                        () => `The 10-minute service is real! Very impressed with the speed and quality.`,
                        () => `Fastest optical shop in town. Got my specs in 10 mins. The staff was ${pick(staffAdj)} too.`,
                        () => `Incredibly ${pick(speedAdj)} service. Ready in 10 minutes exactly as promised. ${pick(thanks)}`,
                        () => `If you need glasses fast, go to ${SHOP_NAME}. Done in 10 mins! ${capitalize(pick(adjectives))} quality.`
                    ];
                    
                    // Generate until we have enough
                    let attempts = 0;
                    while (reviews.size < targetCount && attempts < 50) {
                        reviews.add(pick(fastTemplates)());
                        attempts++;
                    }
                    return Array.from(reviews);
                }

                // 2. GENERAL LOGIC FOR OTHER SERVICES
                const generalTemplates = [
                    // Experience Focus
                    () => `Had a ${pick(adjectives)} experience at ${SHOP_NAME}. The team was ${pick(staffAdj)} with my ${serviceType}. ${pick(thanks)}`,
                    // Service Focus
                    () => `${capitalize(pick(adjectives))} service! Came in for ${serviceType} and was very happy with the results.`,
                    // Simple & Direct
                    () => `So happy I found ${SHOP_NAME}. My ${serviceType} was ${pick(speedAdj)} and professional. ${pick(thanks)}`,
                    // Quality Focus
                    () => `The quality at ${SHOP_NAME} is ${pick(adjectives)}. If you need ${serviceType}, this is the place to go.`,
                    // Staff Focus
                    () => `The staff is very ${pick(staffAdj)}. Got my ${serviceType} done easily. ${pick(thanks)}`,
                    // Value Focus
                    () => `Best place for ${serviceType}. ${capitalize(pick(staffAdj))} staff and ${pick(adjectives)} service.`,
                    // Appreciation
                    () => `Just got my ${serviceType} from ${SHOP_NAME}. Everything was ${pick(adjectives)}. ${pick(thanks)}`
                ];

                let attempts = 0;
                while (reviews.size < targetCount && attempts < 50) {
                    reviews.add(pick(generalTemplates)());
                    attempts++;
                }
                
                return Array.from(reviews);
            };

            const handleServiceSelect = (selected) => {
                setService(selected);
                setStep(2);
                setTimeout(() => {
                    setGeneratedOptions(generateReviews(selected));
                    setStep(3);
                }, 1500); 
            };

            const handleCopyAndRedirect = (text, index) => {
                const textArea = document.createElement("textarea");
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                try {
                    document.execCommand('copy');
                    setCopiedIndex(index);
                    setTimeout(() => {
                        window.open(GOOGLE_REVIEW_LINK, '_blank');
                    }, 1000);
                } catch (err) {
                    console.error('Fallback copy failed', err);
                    alert("Please manually copy the text, then we will open Google Maps!");
                    window.open(GOOGLE_REVIEW_LINK, '_blank');
                }
                document.body.removeChild(textArea);
            };

            const handleReset = () => {
                setStep(1);
                setCopiedIndex(null);
            };

            return (
                <div className="min-h-screen flex justify-center">
                    <div className="w-full max-w-md bg-white shadow-xl min-h-screen flex flex-col">
                        
                        {/* Header */}
                        <header className="bg-blue-600 p-6 text-white rounded-b-3xl shadow-lg z-10 relative overflow-hidden">
                            <div className="absolute top-0 right-0 -mt-4 -mr-4 opacity-20">
                                <Glasses size={120} />
                            </div>
                            <h1 className="text-2xl font-bold flex items-center gap-2 relative z-10">
                                {SHOP_NAME}
                            </h1>
                            <p className="text-blue-100 text-sm mt-1 relative z-10">
                                Quick Review Generator
                            </p>
                        </header>

                        <main className="flex-1 p-6 flex flex-col relative">
                        
                        {/* STEP 1: Select Service */}
                        {step === 1 && (
                            <div className="animate-fade-in">
                                <h2 className="text-xl font-semibold mb-2 text-slate-800">
                                    How was your visit?
                                </h2>
                                <p className="text-slate-500 mb-6 text-sm">
                                    Select an option to generate your review.
                                </p>

                                <div className="grid grid-cols-1 gap-3">
                                    <ServiceButton 
                                        icon={<Glasses size={24} />} 
                                        iconColor="text-blue-600 bg-blue-50"
                                        label="New Glasses" 
                                        onClick={() => handleServiceSelect("new glasses")} 
                                    />
                                    
                                    <ServiceButton 
                                        icon={<Zap size={24} />} 
                                        iconColor="text-amber-600 bg-amber-50"
                                        label="Fast Service (10 min)" 
                                        onClick={() => handleServiceSelect("fast service")} 
                                    />

                                    <ServiceButton 
                                        icon={<Eye size={24} />} 
                                        iconColor="text-emerald-600 bg-emerald-50"
                                        label="Eye Exam" 
                                        onClick={() => handleServiceSelect("eye exam")} 
                                    />
                                    
                                    <ServiceButton 
                                        icon={<Sun size={24} />} 
                                        iconColor="text-orange-600 bg-orange-50"
                                        label="Sunglasses" 
                                        onClick={() => handleServiceSelect("sunglasses")} 
                                    />
                                    
                                    <ServiceButton 
                                        icon={<Sparkles size={24} />} 
                                        iconColor="text-purple-600 bg-purple-50"
                                        label="Frame Adjustment" 
                                        onClick={() => handleServiceSelect("frame adjustment")} 
                                    />
                                </div>
                            </div>
                        )}

                        {/* STEP 2: Loading AI */}
                        {step === 2 && (
                            <div className="flex-1 flex flex-col items-center justify-center text-center animate-fade-in">
                                <div className="relative">
                                    <div className="w-16 h-16 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin mb-4"></div>
                                    <div className="absolute inset-0 flex items-center justify-center text-blue-600">
                                        <Sparkles size={24} className="animate-pulse" />
                                    </div>
                                </div>
                                <h3 className="text-lg font-semibold text-slate-700">Creating your review...</h3>
                                <p className="text-slate-400 text-sm mt-2">Writing unique feedback based on your visit.</p>
                            </div>
                        )}

                        {/* STEP 3: Choose Review */}
                        {step === 3 && (
                            <div className="animate-slide-up pb-20">
                                <div className="flex items-center justify-between mb-4">
                                    <h2 className="text-xl font-semibold text-slate-800">
                                        Tap to Select
                                    </h2>
                                    <button onClick={handleReset} className="text-xs font-medium text-slate-400 hover:text-blue-600 uppercase tracking-wide">
                                        Back
                                    </button>
                                </div>
                                
                                <p className="text-slate-500 text-xs mb-4 flex gap-2 items-center">
                                    <Check size={14} className="text-green-500" />
                                    Select one to copy & open Maps automatically.
                                </p>

                                <div className="space-y-4">
                                    {generatedOptions.map((text, idx) => (
                                        <div key={idx} className={`relative p-5 rounded-xl border-2 transition-all duration-300 shadow-sm ${copiedIndex === idx ? 'border-green-500 bg-green-50 transform scale-[1.02]' : 'border-slate-100 bg-white hover:border-blue-300 active:border-blue-500'}`}>
                                            {copiedIndex === idx && (
                                                <div className="absolute -top-3 -right-2 bg-green-500 text-white text-xs font-bold px-3 py-1 rounded-full shadow-md flex items-center gap-1 animate-bounce">
                                                    <Check size={12} /> COPIED
                                                </div>
                                            )}
                                            <div className="flex gap-1 text-amber-400 mb-2">
                                                {[1,2,3,4,5].map(i => <Star key={i} size={14} fill="currentColor" />)}
                                            </div>
                                            <p className="text-slate-700 text-sm leading-relaxed mb-4">"{text}"</p>
                                            <button onClick={() => handleCopyAndRedirect(text, idx)} className={`w-full py-3 rounded-lg font-semibold text-sm flex items-center justify-center gap-2 transition-colors ${copiedIndex === idx ? 'bg-green-500 text-white' : 'bg-slate-900 text-white hover:bg-blue-600 active:bg-blue-700'}`}>
                                                {copiedIndex === idx ? <>Opening Maps...</> : <><Copy size={16} /> Post This Review</>}
                                            </button>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        )}
                        </main>
                        <footer className="p-4 text-center text-xs text-slate-400 border-t bg-slate-50">
                            Thank you for choosing Nayan Optics
                        </footer>
                    </div>
                </div>
            );
        }

        // Standard Service Button with customizable colors
        function ServiceButton({ icon, label, onClick, iconColor = "bg-blue-50 text-blue-600" }) {
            return (
                <button onClick={onClick} className="w-full p-4 bg-white border border-slate-200 rounded-xl flex items-center justify-between group hover:border-blue-500 hover:shadow-md transition-all active:scale-95">
                    <div className="flex items-center gap-4">
                        <div className={`p-3 rounded-lg transition-colors ${iconColor} group-hover:bg-blue-600 group-hover:text-white`}>
                            {icon}
                        </div>
                        <span className="font-semibold text-slate-700 text-lg">{label}</span>
                    </div>
                    <ChevronRight className="text-slate-300 group-hover:text-blue-500" />
                </button>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>